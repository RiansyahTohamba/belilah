<br>
<div class="new_arrivals">
  <div class="container">
    <h1 align='center'>Orders</h1>
    <p id="notice"><%= notice %></p>
    <table>
      <tbody>
        <tr>
          <th>INV20181010101210</th>
        </tr>
        <tr>
          <td rowspan="2"><b> Item</b></td>
          <td>
            <table>
              <tr>
                <td>Product 1 </td>
                <td><%= number_to_currency(10) %> </td>
                <td>X</td>
                <td>2</td>
                <td><%= number_to_currency(20) %></td>
              </tr>
              <tr>
                <td>Product 1 </td>
                <td><%= number_to_currency(10) %> </td>
                <td>X</td>
                <td>2</td>
                <td><%= number_to_currency(20) %></td>
              </tr>
              <tr>
                <td>Product 1 </td>
                <td><%= number_to_currency(10) %> </td>
                <td>X</td>
                <td>2</td>
                <td><%= number_to_currency(20) %></td>
              </tr>
              <tr>
                <th colspan="3"></th>
                <th >Total Price </th>
                <th> <%= number_to_currency(2000) %></th>
              </tr>
            </table>
          </td>

        </tr>
        <tr>
          <td>
            <p>
              <strong>Name:</strong>
              <%= @order.name %>
            </p>

            <p>
              <strong>Address:</strong>
              <%= @order.address %>
            </p>

            <p>
              <strong>Email:</strong>
              <%= @order.email %>
            </p>

            <%= link_to 'Edit', edit_order_path(@order) %>
          </td>
        </tr>
        <tr>
          <td colspan="2"></td>
          <td>
            <%= form_tag charges_path, id:'chargeForm' do %>
                <% if flash[:error].present? %>
                  <div id="error_explanation">
                    <p><%= flash[:error] %></p>
                  </div>
                <% end %>

            <!-- use credit card number 4242 4242 4242 4242 ,
                any three digit CVC and any expiry date-->
              <script src="https://checkout.stripe.com/checkout.js"></script>
              <%= hidden_field_tag 'stripeToken' %>
              <%= hidden_field_tag 'stripeEmail' %>
              <%= hidden_field_tag 'amount', 499 %>
              <%= hidden_field_tag 'orderId', @order.id %>
              <button id="btn-buy" type="button" class="btn btn-primary">
                Pay With Card
              </button>
              <script type="text/javascript">
                var handler = StripeCheckout.configure({
                  key: '<%= Rails.configuration.stripe[:publishable_key] %>',
                  token: function(token,arg){
                    document.getElementById("stripeToken").value = token.id;
                    document.getElementById("stripeEmail").value = token.email;
                    document.getElementById("chargeForm").submit();
                  }
                });
                // membuka popup dialog, ketiga paramater name,description, amount harus diisi
                document.getElementById("btn-buy").addEventListener('click',function(e){
                  handler.open({
                    name: 'Belilah',
                    description: 'Buy these thing',
                    amount: document.getElementById("amount").value
                  });
                  // amount in cent
                  e.preventDefault();
                });
              </script>
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>






  </div>
</div>
